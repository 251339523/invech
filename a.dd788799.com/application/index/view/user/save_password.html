<link rel="stylesheet" type="text/css" href="/__CSS__/user/reset.css?v=20170715">
<link rel="stylesheet" type="text/css" href="/__CSS__/user/hpn-common.css">
<link rel="stylesheet" type="text/css" href="/__CSS__/user/index.css?v=20171117">
<link rel="stylesheet" type="text/css" href="/__CSS__/user/global.css">
<link rel="stylesheet" type="text/css" href="/__CSS__/user/info.css">
<script type="text/javascript" src="/__JS__/user/jquery.min.js?v=2017"></script><!--jQuery库-->
<script type="text/javascript" src="/__JS__/user/jquery.validate.min.js"></script>
<script type="text/javascript" src="/__JS__/user/validate.js"></script>
<script type="text/javascript" src="/__JS__/user/jquery.form.min.js"></script>
<script type="text/javascript" src="/__JS__/layer/layer.js"></script>
<div class="eveb_content">
    <div class="eveb_nav_sub">
        <ul class="clearfix">
            <li><a href="/user/info.html">个人资料</a></li>
            <li  class="on"><a href="/user/save_password.html">登录密码</a></li>
            <li><a href="/user/bank.html">银行卡管理</a></li>
            <!--<li><a href="javascript:void(0)" onclick="parent.goSubUrl('/member/zhsz.html?module=aqxx')">安全信息</a></li>-->
        </ul>
    </div>
    <form name="resetPasswordForm" novalidate="novalidate" onsubmit="return false;">
        <ul class="eveb_form eveb_setting_form">
            <li>
                <span>原密码：</span>
                <input name="oldPassword" id="oldPassword" type="password" size="20" class="passwinp">
                <label class="error" for="oldPassword">* 请填写您的原始登录密码</label>
            </li>
            <li>
                <span>新密码：</span>
                <input name="newPassword" id="newpassword" type="password" size="20" class="passwinp">
                <label class="error" for="newpassword">* 6~12位字母数字组合</label>
            </li>
            <li>
                <span>确认密码：</span>
                <input name="confirmPassword" id="confirmPassword" type="password" size="20" class="passwinp">
                <label class="error" for="confirmPassword">* 为了您的账号安全，请输入6-12位、区分大小写的字母和数字组合密码。</label>
            </li>
        </ul>
        <div class="eveb_form_submit">
            <input type="submit" value="确认修改" class="button_medium button_1">
            <input type="reset" value="重置" class="ml_10 button_medium button_3">
        </div>
    </form>
</div>
<script>
    $("form[name='resetPasswordForm']").validate({
        rules:{
            oldPassword:{required:true},
            newPassword:{
                required:true,
                minlength: 5
            },
            confirmPassword:{
                required:true,
                minlength: 5,
                equalTo: "#newpassword"
            }
        },
        messages:{
            oldPassword:{required:"* 请填写您的原始登录密码"} ,
            newPassword:{
                required:"* 6~18位字母数字组合",
                minlength: "密码长度不能小于 5 个字母"
            },
            confirmPassword:{
                required:"* 请再次填写新密码",
                minlength: "密码长度不能小于 5 个字母",
                equalTo: "两次密码输入不一致"
            }
        },
        submitHandler:function(form){
            var options = {
                url: "/user/save_password",
                success: showResponse,      //提交后的回调函数
                clearForm: true,            //成功提交后，清除所有表单元素的值
                type: 'post',               //默认是form的method（get or post），如果申明，则会覆盖
                dataType: 'json',           //html(默认), xml, script, json...接受服务端返回的类型
                timeout: 3000               //限制请求的时间，当请求大于3秒后，跳出请求
            }
           $(form).ajaxSubmit(options);
        }
    })
    function showResponse(json, statusText){
        layer.alert(json.msg, {
          time: 20000,
          skin: 'layui-layer-molv', //该皮肤由layer.seaning.com友情扩展。关于皮肤的扩展规则，去这里查阅
          closeBtn: 0,
          anim: 4
        });
        //if(json.url)
        location.href = json.url;
        
    };
</script>
